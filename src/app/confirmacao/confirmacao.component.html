<!-- image -->
<img [src]="shared.uploadedImage" alt="" />
<!-- suggestions -->
<ng-container *ngIf="loading; then spinner; else suggestions"></ng-container>

<ng-template #spinner>
  <kor-spinner label="Bela foto, xô pensar..."></kor-spinner>
</ng-template>

<ng-template #suggestions>
  <div class="suggestions">
    <kor-card *ngFor="let species of suggestedSpecies">
      <kor-text 
        size="header-1" 
        color="rgb(var(--accent-1))" 
        slot="header"
        (click)="openWiki(species?.name)">
        {{species?.name}}
      </kor-text>
      <!-- age, sex -->
      <kor-tag slot="functions" [label]="species.age == 'A' ? 'Adulto' : 'Jovem'"></kor-tag>
      <kor-tag slot="functions" *ngIf="species.sex" [label]="species.sex == 'M' ? 'Macho' : 'Fêmea'"></kor-tag>
      <!-- thumbnails -->
      <div class="thumbnails">
        <img
          *ngFor="let image of species.images"
          [src]="image"
          alt=""
          (click)="
            selectedSpecies.name = species.name; selectedSpecies.image = image
          "
        />
      </div>
      <!-- footer -->
      <kor-progress-bar
        [value]="species?.confidence"
        slot="footer"
      ></kor-progress-bar>
      <kor-text style="width: auto;" slot="footer"
        >{{ species?.confidence }}%</kor-text
      >
    </kor-card>
    <!-- empty state -->
    <kor-empty-state *ngIf="suggestedSpecies.length < 1" label="Nenhuma sugestão encontrada" icon="thumb_down"></kor-empty-state>
  </div>
</ng-template>

<!-- image modal -->
<kor-modal
  [label]="selectedSpecies.name"
  [visible]="selectedSpecies.image"
  (visible-changed)="
    !$event.target.visible ? (selectedSpecies.image = undefined) : ''
  "
  height="auto"
  width="auto"
>
  <img
    [src]="selectedSpecies.image"
    height="fit-content"
    width="fit-content"
    alt=""
  />
</kor-modal>
